<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heart Disease Detection - Setup Instructions</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background-color: #f5f7fa;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        .container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        code {
            background-color: #f8f9fa;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
        pre {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
        }
        .note {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 1rem;
            margin: 1rem 0;
        }
        .warning {
            background-color: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 1rem;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Heart Disease Detection Project - Setup Instructions</h1>
        
        <h2>Project Overview</h2>
        <p>This project consists of:</p>
        <ul>
            <li>A Svelte frontend (in this directory)</li>
            <li>A FastAPI backend (in the parent directory)</li>
            <li>A machine learning model for heart disease prediction</li>
        </ul>
        
        <h2>Setting Up the Backend</h2>
        <p>Before running the frontend, you need to set up the FastAPI backend:</p>
        
        <ol>
            <li>Create a Dockerfile for the backend in the parent directory:
                <pre>FROM python:3.9-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .

EXPOSE 8000

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]</pre>
            </li>
            
            <li>Create a requirements.txt file in the parent directory:
                <pre>fastapi==0.68.0
uvicorn[standard]==0.15.0
scikit-learn==1.0.2
pandas==1.3.3
numpy==1.21.2
pydantic==1.8.2</pre>
            </li>
            
            <li>Create a main.py file in the parent directory for the FastAPI backend:
                <pre>from fastapi import FastAPI
from pydantic import BaseModel
import pandas as pd
import numpy as np
from sklearn.ensemble import RandomForestClassifier
from sklearn.model_selection import train_test_split
import joblib

app = FastAPI(title="Heart Disease Detection API")

# Load and train model (in a real scenario, you would load a pre-trained model)
# This is just for demonstration purposes
df = pd.read_csv("heart_disease_dataset.csv")
X = df.drop("heart_disease", axis=1)
y = df["heart_disease"]

X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)
model = RandomForestClassifier(n_estimators=100, random_state=42)
model.fit(X_train, y_train)

class PatientData(BaseModel):
    age: int
    sex: int
    chest_pain_type: int
    resting_blood_pressure: int
    cholesterol: int
    fasting_blood_sugar: int
    resting_ecg: int
    max_heart_rate: int
    exercise_induced_angina: int
    st_depression: float
    st_slope: int
    num_major_vessels: int
    thalassemia: int

@app.get("/")
def read_root():
    return {"message": "Heart Disease Detection API"}

@app.post("/predict")
def predict_heart_disease(data: PatientData):
    # Convert input data to numpy array
    input_data = np.array([[
        data.age,
        data.sex,
        data.chest_pain_type,
        data.resting_blood_pressure,
        data.cholesterol,
        data.fasting_blood_sugar,
        data.resting_ecg,
        data.max_heart_rate,
        data.exercise_induced_angina,
        data.st_depression,
        data.st_slope,
        data.num_major_vessels,
        data.thalassemia
    ]])
    
    # Make prediction
    prediction = model.predict(input_data)[0]
    probability = model.predict_proba(input_data)[0].max()
    
    return {
        "heart_disease": int(prediction),
        "confidence": float(probability)
    }</pre>
            </li>
        </ol>
        
        <h2>Running the Complete Application</h2>
        <p>Once you've set up the backend, you can run both services using Docker Compose:</p>
        <pre>docker-compose up --build</pre>
        
        <p>This will start both the frontend (on port 3000) and backend (on port 8000).</p>
        
        <div class="note">
            <strong>Note:</strong> The frontend is configured to communicate with the backend at <code>http://localhost:8000</code>. 
            If you're running the services in containers, this should work automatically.
        </div>
        
        <h2>Development Mode</h2>
        <p>To run the frontend in development mode:</p>
        <pre>npm install
npm run dev</pre>
        
        <p>The development server will start on <code>http://localhost:5173</code>.</p>
        
        <div class="warning">
            <strong>Warning:</strong> The current frontend implementation uses mock data for predictions. 
            To connect to the actual backend API, you'll need to uncomment and modify the fetch code 
            in the <code>handlePredict</code> function in <code>src/App.svelte</code>.
        </div>
        
        <h2>Project Structure</h2>
        <pre>PROJECT/
├── heart_disease_dataset.csv
├── heart-disease-detection-frontend/
│   ├── src/
│   │   ├── App.svelte
│   │   ├── app.css
│   │   ├── main.js
│   │   └── lib/
│   │       └── components/
│   ├── package.json
│   ├── README.md
│   ├── Dockerfile
│   ├── docker-compose.yml
│   └── setup-instructions.html
└── (backend files - main.py, requirements.txt, Dockerfile.backend)</pre>
    </div>
</body>
</html>